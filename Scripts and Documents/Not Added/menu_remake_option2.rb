=begin #BEGIN DOCUMENTATION
 ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄
█░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░█
█░░░░░░░██░░░██░░██░░░░██░░██░░██░░██████░░██████░░█████░░██████░░██████░░░░░░░█
█░░░░░░░██░░██░░░████░░██░░██░░██░░██░░░░░░██░░██░░██░░░░░██░░██░░██░░░░░░░░░░░█
█░░░░░░░█████░░░░██░██░██░░██░░██░░██████░░██████░░████░░░██████░░██████░░░░░░░█
█░░░░░░░██░░██░░░██░░████░░██░░██░░░░░░██░░██░░░░░░██░░░░░██░██░░░░░░░██░░░░░░░█
█░░░░░░░██░░░██░░██░░░░██░░██████░░██████░░██░░░░░░█████░░██░░██░░██████░░░░░░░█
█░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░█
▀▀█▀▀▀▀█▀▀▀▀█▀▀▀▀█▀▀▀▀█▀▀▀▀█▀▀▀▀█▀▀▀▀█▀▀▀▀█▀▀▀▀█▀▀▀▀█▀▀▀▀█▀▀▀▀█▀▀▀▀█▀▀▀▀█▀▀▀▀█▀▀
╔╤╩════╩════╩════╩════╩════╩╦═══╩════╩════╩════╩═══╦╩════╩════╩════╩════╩════╩╤╗
║│                          ╚═► KNUSPERS SCRIPTS ◄═╝                          │║
╟┼────────────────────────────────────────────────────────────────────────────┼╢
╟┼─► For: RPG MAKER VX ACE                                                    │║
╟┼─► The script specific stuff starts at line 50!                             │║
╚╧═╦═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╦═╧╝
╔╤═╩═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧╦╧═╧═╧═╧═╧═╧╧═╧═╧═╧═╧═╧╦╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╩═╤╗
║│                          ╚═► AUTHOR & CREATOR ◄═╝                          │║
╟┼────────────────────────────────────────────────────────────────────────────┼╢
║│            Hello, my name is KnusperGipfel aka. Tomoki Hanazawa            │║
║│                 You can contact me on following websites:                  │║
╟┼─► English:                                                                 │║
║│• http://www.rpgmakervxace.net/user/58675-knuspergipfel/                    │║
╟┼─► German (Native):                                                         │║
║│• http://rpgmaker-vx-ace.de/user/2793-knuspergipfel/                        │║
╚╧═╦═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╦═╧╝
╔╤═╩═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧╦╧═╧═╧═╧═╧╧═╧═╧═╧═╧╦╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╩═╤╗
║│                            ╚═► TERMS OF USE ◄═╝                            │║
╟┼────────────────────────────────────────────────────────────────────────────┼╢
║│   This script is free for commercial and non-commercial usage as long as   │║
║│              you mention me, KnusperGipfel, in your credits.               │║
╚╧═╦═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╦═╧╝
╔╤═╩═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧╦╧═╧═╧═╧═╧╧═╧═╧═╧═╧╦╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╩═╤╗
║│                            ╚═► INSTALLATION ◄═╝                            │║
╟┼────────────────────────────────────────────────────────────────────────────┼╢
║│  To install this script put it in the script editor. (open with F11)       │║
║│  Place it like the example shows:                                          │║
╟┼─► Example:                                                                 │║
║├╖                                                                           │║
║│╠═════════════════╗                                                         │║
║│║ ▼ Materials     ║                                                         │║
║│║ KSA - Script  ◄─╫─ Here.                                                  │║
║│║ ( Insert here ) ║  Under '▼ Materials' and above '▼ Main Process'.        │║
║│║                 ║                                                         │║
║│║ ▼ Main Process  ║                                                         │║
║│╠═════════════════╝                                                         │║
║├╜                                                                           │║
╚╧════════════════════════════════════════════════════════════════════════════╧╝
╔╤═╦════════════════════════════════════════════════════════════════════════╦═╤╗
║│▐█▌ ▼ ▼ ▼ ▼ ▼ ▼ BELOW HERE STARTS THE SCRIPT SPECIFIC STUFF ▼ ▼ ▼ ▼ ▼ ▼  ▐█▌│║
╚╧═╩════════════════════════════════════════════════════════════════════════╩═╧╝
╔╤══════════════════════╦══════════════════════════════╦════════╤══════════╤══╤╗
║│                      ╚═►  KSA - Custom Item Menu  ◄═╝        │DD-MM-YYYY│  │║
╟┼──────────────────────────────────────────────────────────────┼──────────┼──┼╢
╟┼─► Current Version: 2.4                           Last Update:│20-11-2015│◄─┼╢
╟┼──────────────────────────────────────────────────────────────┼──────────┼──┼╢
╠╪══════════════►  CHANGELOG  CHANGELOG  CHANGELOG  CHANGELOG  ◄╪══════════╪══╪╣
╟┼─► Version 2.4 ◄─────────────────────────────────────────────►│20-11-2015│◄─┼╢
║│• added ability to disable the save command                   │          │  │║
║│• added ability to disable gold window                        │          │  │║
╟┼─► Version 2.3 ◄─────────────────────────────────────────────►│19-11-2015│◄─┼╢
║│• added aliases                                               │          │  │║
║│• added $imported                                             │          │  │║
╟┼─► Version 2.2 ◄─────────────────────────────────────────────►│24-10-2015│◄─┼╢
║│• added gold window                                           │          │  │║
╟┼─► Version 2.1 ◄─────────────────────────────────────────────►│24-10-2015│◄─┼╢
║│• not documented same for all earlier versions                │          │  │║
╚╧═╦═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╪═╤═╤═╤═╤═╤╧╦═╧╝
╔╤═╩═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧╦╧═╧═╧═╧═╧╧═╧═╧═╧═╧╦╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╩═╤╗
║│                            ╚═► Description  ◄═╝                            │║
╟┼────────────────────────────────────────────────────────────────────────────┼╢
║│ This script changes the standart-ingame-menu to a shortened version of it. │║
║│ This menu allows only the menu-commands for your items, your key items,    │║
║│ for saving a game and for ending the game / returning to title.            │║
║│ It's mostly used for puzzle or adventuring games where you don't need to   │║
║│ fight and only need access to your items.                                  │║
║│ Since version 2.4 you have to ability to disable the save command, for a   │║
║│ retro like rpg feeling.                                                    │║
╚╧═╦═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╤═╦═╧╝
╔╤═╩═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧╦╧═╧═╧═╧═╧╧═╧═╧═╧═╧╦╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╧═╩═╤╗
║│                            ╚═► Instructions ◄═╝                            │║
╟┼────────────────────────────────────────────────────────────────────────────┼╢
║│ If you want to disable the save command in youre menu just write false     │║
║│ behind the switch in the configuration tab, so it looks like this:         │║
╟┼─► ENABLE_SAVE = false                                                      │║
║│ If you want to enable it again change it to true:                          │║
╟┼─► ENABLE_SAVE = true                                                       │║
║│ Same applies to disabling the gold window:                                 │║
╟┼─► ENABLE_GOLD_WINDOW = false                                               │║
║│ or enabling it again:                                                      │║
╟┼─► ENABLE_GOLD_WINDOW = true                                                │║ 
╚╧╦═════════════════╦══════════════════════════════════════╦═════════════════╦╧╝
##║ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ╠═► DON'T TOUCH THE STUFF BELOW THIS ◄═╣ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ║##
##╚═════════════════╩══════════════════════════════════════╩═════════════════╝##
=end #END DOCUMENTATION
($imported ||= {})["KSA - Custom Item Menu"] = true
module KSA
##╔═════════════════╦══════════════════════════════════════╦═════════════════╗##
##║ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ╠═► DON'T TOUCH THE STUFF ABOVE THIS ◄═╣ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ║##
##╠╤════════════════╩════════╦════════════════════╦════════╩════════════════╤╣##
##║│                         ╚═► Configuration  ◄═╝                         │║##
##╟┼────────────────────────────────────────────────────────────────────────┼╢##
##╙┴─► Enable save command? ◄───────────────────────────────────────────────┴╜##
  ENABLE_SAVE = true         # Default: true
##═──► Enable gold window? ◄─────────────────────────────────────────────────═##  
  ENABLE_GOLD_WINDOW = true  # Default: true
##╓──────────────────────────────────────────────────────────────────────────╖##
##╠══╦══╦══╦════════════════════════════════════════════════════════╦══╦══╦══╣##
##╠████████╩═► !DON'T TOUCH ANYTHING DOWN HERE OR YOU'LL EXPLODE! ◄═╩████████╣##
##╚═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼═▼╝##
end

#==============================================================================
# ** Window_ItemCategory
#==============================================================================

class Window_ItemCategory < Window_HorzCommand
  #--------------------------------------------------------------------------
  # * Get Digit Count
  #--------------------------------------------------------------------------
  alias ksa_cim_col_max col_max
  def col_max
    if KSA::ENABLE_SAVE == true
      return 4
    else
      return 3
    end
  end
  #--------------------------------------------------------------------------
  # * Create Command List
  #--------------------------------------------------------------------------
  alias ksa_cim_make_command_list make_command_list
  def make_command_list
    add_command(Vocab::item,     :item)
    add_command(Vocab::key_item, :key_item)
    if KSA::ENABLE_SAVE == true
      add_command(Vocab::save,     :save, save_enabled)
    end
    add_command(Vocab::game_end, :game_end)
  end
  #--------------------------------------------------------------------------
  # * Get Activation State of Save
  #--------------------------------------------------------------------------
  def save_enabled
    !$game_system.save_disabled
  end
end # Window_ItemCategory

#==============================================================================
# ** Scene_Item
#==============================================================================

class Scene_Item < Scene_ItemBase
  #--------------------------------------------------------------------------
  # * Start Processing
  #--------------------------------------------------------------------------
  alias ksa_cim_start start
  def start
    super
    create_help_window
    create_category_window
    create_item_window
    if KSA::ENABLE_GOLD_WINDOW == true
      create_gold_window
    end
  end
  #--------------------------------------------------------------------------
  # * Frame Update
  #--------------------------------------------------------------------------
  alias ksa_cim_update update
  def update
    super
    return on_cancel if Input.trigger?(:B)
  end
  #--------------------------------------------------------------------------
  # * Create Gold Window
  #-------------------------------------------------------------------------- 
  def create_gold_window
    @gold_window = Window_Gold.new
    @gold_window.x = 0
    @gold_window.y = Graphics.height - @gold_window.height
  end
  #--------------------------------------------------------------------------
  # * Create Category Window
  #--------------------------------------------------------------------------
  alias ksa_cim_create_category_window create_category_window
  def create_category_window
    @category_window = Window_ItemCategory.new
    @category_window.viewport = @viewport
    @category_window.help_window = @help_window
    @category_window.y = @help_window.height
    @category_window.set_handler(:ok,     method(:on_category_ok))
  end
  #--------------------------------------------------------------------------
  # * Category [OK]
  #--------------------------------------------------------------------------
  alias ksa_cim_on_category_ok on_category_ok
  def on_category_ok
    case @category_window.current_symbol
    when :item, :key_item
      @item_window.activate
      @item_window.select_last
    when :save
      SceneManager.call(Scene_Save)
    when :game_end
      SceneManager.call(Scene_End)
    end
  end
  #--------------------------------------------------------------------------
  # * [Cancel]
  #--------------------------------------------------------------------------
  def on_cancel
    Sound.play_cancel
    return_scene
  end
  #--------------------------------------------------------------------------
  # * Create Item Window
  #--------------------------------------------------------------------------
  alias ksa_cim_create_item_window create_item_window
  def create_item_window
    wy = @category_window.y + @category_window.height
    if KSA::ENABLE_GOLD_WINDOW == true    
      wh = (Graphics.height - wy) - 48
    else
      wh = Graphics.height - wy
    end
    @item_window = Window_ItemList.new(0, wy, Graphics.width, wh)
    @item_window.viewport = @viewport
    @item_window.help_window = @help_window
    @item_window.set_handler(:ok,     method(:on_item_ok))
    @item_window.set_handler(:cancel, method(:on_item_cancel))
    @category_window.item_window = @item_window
  end
end # Scene_Item

#==============================================================================
# ** Scene_Map
#==============================================================================

class Scene_Map < Scene_Base
  #--------------------------------------------------------------------------
  # * Call Menu Screen
  #--------------------------------------------------------------------------
  alias ksa_cim_call_menu call_menu
  def call_menu
    Sound.play_ok
    SceneManager.call(Scene_Item)
  end
end # Scene_Map